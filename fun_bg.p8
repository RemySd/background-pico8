pico-8 cartridge // http://www.pico-8.com
version 32
__lua__

#include utils.lua
#include bg1.lua
#include bg2.lua
#include bg3.lua
#include bg4.lua

function _init()
    page = 'bg1'
    currentBg = 1

    snowBg = initSnowBg()

    wave1 = initWaveBg1()
    wave2 = initWaveBg2()
    wave3 = initWaveBg3()

    tunnelBg = initTunnelBg()

    doubleBar = initDoubleBarBg()
end

function _update()
    handle_bg()

    if page == 'bg1' then
        runSnowBg(snowBg)
    elseif page == 'bg2' then
        runWave(wave1)
        runWave(wave2)
        runWave(wave3)
    elseif page == 'bg3' then
        runTunnelBg(tunnelBg)
    elseif page == 'bg4' then
        runDoubleBar(doubleBar)
    end
end

function _draw()
	cls()

    if page == 'bg1' then
        drawSnowBg(snowBg)
    elseif page == 'bg2' then
        drawWaveBg(wave1)
        drawWaveBg(wave2)
        drawWaveBg(wave3)
    elseif page == 'bg3' then
        drawTunnelBg(tunnelBg)
    elseif page == 'bg4' then
        drawDoubleBar(doubleBar)
    end

    draw_arrows()

    title = "background cart !"
    outline(title, getCenterTextX(title), 112, 9, 8)
end

function handle_bg()
    if btnp(1) then
        currentBg = currentBg + 1

        if currentBg > 4 then
            currentBg = 1
        end

        page = 'bg' .. currentBg
    elseif btnp(0) then
        currentBg = currentBg - 1

        if currentBg < 1 then
            currentBg = 4
        end

        page = 'bg' .. currentBg
    end
end

function draw_arrows()

    zspr(2,1,1,5,108,2,false,false)
    zspr(1,1,1,106,108,2,false,false)

    if btn(1) then
        zspr(17,1,1,106,108,2,false,false)
    elseif btn(0) then
        zspr(18,1,1,5,108,2,false,false)
    end
end

__gfx__
00000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000071227000071227000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007122700712270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000712277122700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000712277122700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007122700712270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000071227000071227000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000071997000071997000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007199700719970000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000719977199700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000719977199700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007199700719970000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000071997000071997000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
